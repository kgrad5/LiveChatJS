// Generated by CoffeeScript 1.3.3
(function() {

  require(["libs/jquery-1.7.2.min", "libs/underscore-min", "libs/backbone-min"], function() {
    var $;
    $ = jQuery;
    return $(function() {
      var Chat, ChatSubmit, Post, chat, chatSubmit;
      Post = Backbone.Model.extend({
        text: null,
        time: null
      });
      Chat = Backbone.Collection.extend({
        model: Post
      });
      chat = new Chat;
      ChatSubmit = Backbone.View.extend({
        el: $('#chat-submit'),
        initialize: function() {
          _.bindAll(this, 'submit', 'render');
          $('#chat-input').focus().select();
          return this.submit();
        },
        submit: function() {
          return $(this.el).on('click', function(e) {
            e.preventDefault();
            chat.add({
              text: $('#chat-input').val(),
              time: new Date()
            });
            console.log(JSON.stringify(chat));
            $('#chat-ul').append('<li>' + $('#chat-input').val() + "<span class='timestamp'>" + new Date() + "</span></li>");
            return $('#chat-input').val('');
          });
        }
      });
      return chatSubmit = new ChatSubmit();
    });
  });

}).call(this);
